---
level: Imperial
---
---
level: Imperial
---
---
level: Imperial
---
---
level: Imperial
---
---
encrypt_content:
  level: Imperial
  password: Raymond#1234
  username: hg1523
level: Imperial
---
# 1
## a
The TLB is the Translation lookaside buffers, it caches the mappings of virtual addresses to physical addresses, the purpose is to avoid unnecessary context switches

## b
the page table diagram

## c:
EAT is calculated as $(\epsilon + m)\alpha + (\epsilon + 4m)(1-\alpha)$ for a 4-level page table

and we have
- $\epsilon = 0.5ns$
- $m = 15ns$

so when EAT is 20ns, $20 = 15.5\alpha + 60.5 - 60.5\alpha = 60.5 - 45\alpha$ so $40.5 = 45\alpha$, $\alpha = 90\%$

## d:
### i:
the TLB flushes

## ii:
TLB does nothing

## e:
the TLB only flushes when the processes change, so we modify the OS scheduler to make it tend to scheduler the nearest processes or threads first

# 2
## a
The OS kernel creates new child process by making exact copy of parent image, making the child process inherits resources of parent process and schedule it to be executed concurrently with the parent process

## b

### i
### ii
ABCDCD

ACDBCD

ABDCDC

ABDCCD

### iii:
if the program outputs BCCADD, then it means after the first fork, child1 first print B, then some parent process print C which could only be child1, then another parent process print C, the only remaining candidate is the main process, but following the code, the main process has to print A before C, so not possibe

### iv:
add waitpid(-1, some param) between line 7 and 8

## c:
fork makes the child process and the parent process run concurrently, so there might be race conditions, we can add some waitpid code to resolve this