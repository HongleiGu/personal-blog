[1004. Max Consecutive Ones III](https://leetcode.com/problems/max-consecutive-ones-iii/)

Given a binary array `nums` and an integer `k`, return _the maximum number of consecutive_ `1`_'s in the array if you can flip at most_ `k` `0`'s.

**Example 1:**

**Input:** nums = [1,1,1,0,0,0,1,1,1,1,0], k = 2
**Output:** 6
**Explanation:** [1,1,1,0,0,**1**,1,1,1,1,**1**]
Bolded numbers were flipped from 0 to 1. The longest subarray is underlined.

**Example 2:**

**Input:** nums = [0,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,1,1], k = 3
**Output:** 10
**Explanation:** [0,0,1,1,**1**,**1**,1,1,1,**1**,1,1,0,0,0,1,1,1,1]
Bolded numbers were flipped from 0 to 1. The longest subarray is underlined.

**Constraints:**

- `1 <= nums.length <= 105`
- `nums[i]` is either `0` or `1`.
- `0 <= k <= nums.length`

we use a sliding window, since we can flip at most k zeros, so we need to find a subsequence with at most k zero.

```java
class Solution {

    public int longestOnes(int[] nums, int k) {

        int left = 0;

        int right = 0;

        int n = nums.length;

        int zeros = 0;

        int rtrn = 0;

        while (right < n) { // keep incrementing right

            if (nums[right] == 0) { // if it is a zero

                while (zeros > k) { // we might exceed the max limit, so retract until satisfy k

                    zeros -= (1 - nums[left]); // if it is a zero, we decrement zero cnt

                    left += 1; // retract from the left end

                }

                rtrn = Math.max(rtrn, right - left); // until the k condition is satisfied, we compare the current with the previous max

                zeros += 1; // zeros cnt += 1

            }

            right += 1;

        }

        while (zeros > k) { // we might exceed the max limit, so retract until satisfy k

            zeros -= (1 - nums[left]); // if it is a zero, we decrement zero cnt

            left += 1; // retract from the left end

        }

        return Math.max(rtrn, right - left);

    }

}
```

- Runtime 3ms Beats 85.85%
- Memory 46.36MB Beats 80.31%
- Time Complexity: O(n), at most O(2n), I think
- Space Complexity: O(1)